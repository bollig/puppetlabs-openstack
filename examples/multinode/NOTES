
To enable ping of VMs: 

1) Add static IP to the br-ex (gateway) 
    ip addr add 192.168.22.2/24 dev br-ex
    iptables -t nat -I POSTROUTING 1 -s 192.168.22.0/24 -j MASQUERADE

1) Add ICMP ingress to the default security group
    # These rule ids are 'default'
    neutron security-group-rule-create --protocol icmp 2c9fe88a-fd8f-4d05-a5de-e0526232883d
    neutron security-group-rule-create --protocol icmp 12dbf1b0-df16-47a3-a259-89e5db7011ab

2) On control (network node):  
    ip netns exec qrouter-93a78975-02d4-4de3-898d-f9ba16aa18cd ping 10.0.0.4


########

To monitor traffic hitting a node: 
    yum install -y tcpdump 
    tcpdump -i any -n -v \ 'icmp[icmptype] = icmp-echoreply or icmp[icmptype] = icmp-echo'

########

Pacemaker

Pacemaker can be used for HA distribution of nova services. See modules/nova/examples/*.pp for details. The nova services are not tracked by puppet, allowing pacemaker to launch them as needed across nodes

########

Live Migration fails due to: 

    InvalidSharedStorage: compute02 is not on shared storage: Live migration can not be used without shared storage except a booted from volume VM which does not have a local disk.

########

Cinder Volume Manager fails to load driver (after vagrant reload): 

2016-02-16 03:41:51.005 31717 WARNING cinder.volume.manager [req-f286b8d1-7eec-44d7-8185-f227afcc032b - - - - -] Update driver status failed:  is uninitialized.
2016-02-16 03:41:55.031 31717 ERROR cinder.service [-] Manager for service cinder-volume control is reporting problems, not sending heartbeat. Service will appear "down".


    control|storage $> losetup /dev/loop1 /var/lib/cinder/cinder-volumes 
    control|storage $> pvcreate /dev/loop1
    control|storage $> vgcfgrestore cinder-volumes
    control|storage $> systemctl restart openstack-cinder*
